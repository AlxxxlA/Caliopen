---
identities:
  get:
    description: Returns a list of IDs suggestions according to given parameters/filter. Search is performed within current user's indexes (messages & contacts).
    tags:
    - identities
    security:
    - basicAuth: []
    parameters:
    - name: q
      in: query
      description: a string (3 chars at least) from which to perform the suggestion search
      required: true
      type: string
    produces:
    - application/json
    responses:
      '200':
        description: a list of suggestions for user to pick-up an identity
        schema:
          type: array
          items:
            "$ref": "../objects/IdentitySuggests.yaml"
      '400':
        description: malform request
        schema:
          type: object
          "$ref": "../objects/Error.yaml"
      '401':
        description: Unauthorized access
        schema:
          "$ref": "../objects/Error.yaml"
identities_locals:
  get:
    description: returns the list of user's local identities
    tags:
    - identities
    security:
    - basicAuth: []
    parameters: []
    produces:
    - application/json
    responses:
      '200':
        description: Local identities returned
        schema:
          type: object
          properties:
            total:
              type: integer
              format: int32
              description: number of local identities found for user
            local_identities:
              type: array
              items:
                "$ref": "../objects/LocalIdentity.yaml"
      '401':
        description: Unauthorized access
        schema:
          "$ref": "../objects/Error.yaml"

remotes:
  post:
    description: create a new remote identity for an user
    tags:
    - identities
    security:
    - basicAuth: []
    consumes:
    - application/json
    parameters:
    - name: identity
      in: body
      required: true
      schema:
        "$ref": "../objects/NewRemoteIdentity.yaml"
    responses:
      '200':
        description: Remote identity created
        schema:
          type: object
          properties:
            location:
              type: string
              description: url to retrieve new remote identity's infos at /remotes/{identifier}
